# Журнал змін (Changelog)

## [Unreleased]

### Змінено
- Оптимізовано структуру маршрутів API, щоб уникнути дублювання:
  - Маршрути, пов'язані з подіями (`/api/events/*`), тепер знаходяться в `events_routes.py`
  - Маршрути, пов'язані зі сповіщеннями (`/api/alerts/*`), залишені в `data_labeling_routes.py`
- Покращено обробку помилок та логування в API-ендпоінтах
- Додані доктустрінги для всіх API-функцій

### Додано
- Властивості моделі `Event` для сумісності з двома підходами до маркування (прямі поля та JSON-поле `labels`)
- Тестовий скрипт для перевірки API-ендпоінтів
- ML інтеграція:
  - Додано механізм відкладеного завантаження конфігурації MLService для уникнення залежності від Flask-контексту
  - Додано метод `reload_config()` для можливості динамічного перезавантаження ML-конфігурації
  - Додано детальну валідацію параметрів в API-ендпоінтах ML
  - Покращено фронтенд ML-дашборд з підтримкою стану "ML вимкнено"
  - Доданий компонент з надійною ізольованою обробкою помилок для різних частин ML-інтерфейсу

### Виправлено
- Проблему з N+1 запитами при отриманні raw_logs через використання eager loading
- Помилки з обробкою дат у фільтрах
- Неузгодженість форматів відповідей API між різними ендпоінтами
- Відсутність імпорту класу `Configuration` в `events_routes.py`
- Покращено перевірки на `None` при роботі з `labels_data` для запобігання помилок
- Виправлено обробку помилок при отриманні інформації про модель в ML API

### Покращено
- Розширено обробку помилок:
  - Додано детальне логування помилок з використанням traceback
  - Додано можливість відновлення після часткових помилок у ML-дашборді
  - Впроваджено централізовану обробку помилок API на фронтенді
- Додано HTML-нотифікації з використанням Notification API, якщо доступно
- Покращено UX для стану, коли ML вимкнено:
  - Додано пояснювальне повідомлення
  - Додано посилання для швидкого переходу до налаштувань системи
- Додано попередню валідацію параметрів API для запобігання неправильним запитам
